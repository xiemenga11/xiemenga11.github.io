<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>时钟DEMO</title>
	<link rel="stylesheet" href="../css/leo.css">
	<style>
		body{
			background-color: #fff;
		}
		#mycan{
			display: block;
			margin:0 auto;
			background-color: #fff;
		}
		#goHome{
			display: block;
			position: fixed;
			bottom:30px;
			right:20px;
			padding:10px;
			border-radius: 5px;
			background-color: rgba(0,0,0,0.3);
			color:white;
		}
	</style>
</head>
<body>
<canvas id="mycan" width="1200" height="700"></canvas>
<a id="goHome" href="../index.html">返回首页</a>
<script src="../js/selector.js"></script>
<script src="../js/canvas.js"></script>
<script>
	if(l.wid < l.hei){
		l("#mycan").css({width:"100%"})
	}else{
		l("#mycan").css({height:"100%"})
	}
	var gra = C("mycan").r_gradient({
		center:[70,70,50,50],
		sr:50,
		br:150,
		stop:[
			[0,"#fff"],
			[1,"#eee"]
		]
	})
	var time,
		sSpin,
		mSpin,
		hSpin,
		msDeg = 360 / 60 / 1000,
		week = [
			'星期天',
			'星期一',
			'星期二',
			'星期三',
			'星期四',
			'星期五',
			'星期六',
		]
	function drawClock(spin,r,end,color,txt){
		C("mycan")
		.save()
		.setSClo(color)
		.ln_cap("round")
		.ln_wid(50)
		.translate(600,350)
		.spin(spin)
		.begin()
		.arc({
			center:[0,0],
			r:r,
			start:0,
			end:end
		})
		.stroke()
		.close()
		.init()
		.save()
		.translate(575,350)
		.setFClo("#fff")
		.begin()
		.fontSize(30)
		.ftext({
			text:txt,
			position:[Math.cos(Math.PI/180*spin)*r+10,Math.sin(Math.PI/180*spin)*r+10]// position:[r-22,-35]
		})
		.close()
		.init()
	}
	var timerLoop = setInterval(function(){
		time = new Date()
		sSpin = 360 / 60 * time.getSeconds() + msDeg * time.getMilliseconds() - 81
		mSpin = 360 / 60 * time.getMinutes() - 78 + time.getSeconds() * 0.1 
		hSpin = 360 / 12 * time.getHours() - 78 + time.getMinutes() * 0.5
		C("mycan").clearAll()
		drawClock( sSpin,300,1.9,"#f79f79",time.getSeconds() )
		drawClock( mSpin,250,1.88,"#f7d08a",time.getMinutes() )
		drawClock( hSpin,200,1.85,"#e3f09b",time.getHours() )
		C("mycan")
		.save()
		.translate(600,350)
		.setFClo("#87b6a7")
		.begin()
		.arc({
			center:[0,0],
			r:175
		})
		.fill()
		.close()
		.init()
		.save()
		.begin()
		.translate(600,350)
		.setFClo("white")
		.fontSize(40)
		.ftext({
			text:time.getFullYear()+"/"+(time.getMonth()+1)+"/"+time.getDate(),
			position:[-95,0]
		})
		.ftext({
			text:week[time.getDay()],
			position:[-50,50]
		})
		.close()
		.init()
	},20)
	
</script>
</body>
</html>